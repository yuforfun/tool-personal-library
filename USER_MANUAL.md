# [tool-personal-library] - 使用者操作手冊 (User Manual)

歡迎使用 **Personal Digital Library (個人數位圖書館)**。本手冊將引導您了解系統介面上的每一個按鈕功能、操作邏輯以及系統通知含義。

---

## 1. 側邊欄控制區 (Sidebar Controls)
位於介面最左側，是書籍入庫與全域篩選的核心控制台。

### A. 快速入庫 (Quick Add)
* **輸入框 (`請輸入書籍網址`)**
    * **功能**：在此貼上小說的目錄頁或首頁網址。
    * **支援網站**：晉江文學城 (jjwxc)、半夏小說 (banxia)、小說狂人 (czbooks)。
* **按鈕 `啟動 AI 智慧抓取`**
    * **功能**：觸發自動化流程。系統會依序執行：
        1.  啟動爬蟲抓取網頁標題、作者與簡介。
        2.  呼叫 Gemini AI 進行分析 (生成標籤、短評、劇情摘要)。
        3.  將資料寫入本地資料庫。
    * **狀態回饋**：
        * **執行中**：按鈕反灰，上方顯示轉圈圈動畫 (Spinner)，文字提示 `🤖 正在爬取網頁並進行 AI 分析 (Gemini 2.5)...`。
        * **成功**：右上角彈出綠色 Toast 通知 `✅ 成功入庫：《書名》`，並自動重新整理頁面。
        * **失敗**：側邊欄顯示紅色錯誤框 `入庫失敗：爬蟲無法解析或 AI 連線異常。` 或具體的 Python 錯誤訊息。

### B. 篩選器 (Filters)
此區域的變更會即時連動右側的主畫面內容。

* **輸入框 `關鍵字搜尋`**
    * **功能**：輸入「書名」或「作者」的關鍵字進行模糊搜尋。
* **多選選單 `標籤篩選`**
    * **功能**：下拉選擇一個或多個標籤 (如：重生, 甜文)。
    * **邏輯**：顯示包含「任一」所選標籤的書籍 (OR Logic)。
* **下拉選單 `排序方式`**
    * **選項**：
        * `最新入庫` (預設)：新加入的書排在最前面。
        * `最早入庫`：舊書排在前面。
* **多選選單 `閱讀狀態`**
    * **功能**：篩選特定狀態的書籍 (如：只看 `未讀` 或 `閱讀中`)。

---

## 2. 主畫面視圖 (Main View Modes)
位於介面右側，透過頂部的切換器改變顯示模式。

### A. 頂部資訊列 (Top Bar)
* **統計膠囊 (KPI Capsule)**
    * 顯示 `總藏書` 數量與 `本月新增` 數量。此為純資訊展示，不可點擊。
* **視圖切換器 (View Switcher)**
    * **按鈕 `列表模式`**：切換至詳細清單檢視。
    * **按鈕 `畫廊模式`**：切換至視覺化書封檢視。
    * **按鈕 `日曆模式`**：切換至閱讀成就與統計檢視。

### B. 列表模式 (List View)
* **卡片操作**
    * 每一行代表一本書，顯示書名、作者、字數、狀態與評分。
* **按鈕 `📝` (編輯/詳情)**
    * **位置**：每張卡片的最右側。
    * **功能**：點擊後，畫面右側會滑出 **「詳細資訊面板」** (Split View)。

### C. 畫廊模式 (Gallery View)
* **書封卡片**
    * 由程式自動生成的動態色塊封面，顯示書名與作者。
* **按鈕 `📖 詳情`**
    * **功能**：點擊後，畫面右側會滑出 **「詳細資訊面板」**。
* **分頁控制器 (Pagination)**
    * **位置**：畫廊上方。
    * **輸入框 `跳轉頁碼`**：輸入數字並按下 Enter，可跳轉至指定頁面 (每頁顯示 12 本)。

### D. 日曆模式 (Calendar View)
此模式包含兩個分頁 (Tabs)。

* **Tab 1: `📊 數據儀表板`**
    * **圖表**：顯示 `月度閱讀量` (長條圖) 與 `閱讀偏好` (標籤排行)。
    * **互動**：圖表支援滑鼠懸停 (Hover) 查看具體數值。
* **Tab 2: `🗓️ 閱讀日曆`**
    * **按鈕 `◀` / `▶`**：切換上一個月或下一個月。
    * **書籍按鈕 `📕 書名`**
        * **位置**：顯示在具体的日期格子內 (僅顯示「已完食」且有紀錄日期的書)。
        * **功能**：點擊後，下方會開啟 **「詳細資訊面板」**。
        * **提示 (Tooltip)**：滑鼠移上去會顯示完整書名與評分。

---

## 3. 詳細資訊與編輯面板 (Detail Panel)
當您在上述任一模式點擊書籍後，會開啟此面板。這是您編輯書籍資料的主要介面。

### A. 頂部操作區 (Action Bar)
此區域會固定在面板最上方 (Sticky)。

* **按鈕 `✖` (關閉)**
    * **功能**：關閉詳細面板，返回全寬度的列表/畫廊視圖。
* **按鈕 `💾 儲存變更`**
    * **功能**：儲存您對狀態、評分或心得的修改。
    * **回饋**：右下角彈出 `✅ 資料已成功儲存！` 通知。
    * **連動**：若狀態改為 `已完食`，系統會自動將「完食日期」更新為今天 (若原本無紀錄)。
* **按鈕 `🗑️` (刪除)**
    * **功能**：**永久刪除**此書籍資料。
    * **回饋**：右下角彈出 `✅ 書籍已刪除` 通知，面板自動關閉並刷新列表。
* **按鈕 `🔗` (原始連結)**
    * **功能**：在瀏覽器新分頁開啟該小說的原始網址。

### B. 內容編輯區 (Content Area)
* **下拉選單 `閱讀狀態`**：切換 未讀 / 閱讀中 / 已完食 / 棄坑。
* **滑桿 `評分`**：拖曳給予 0 ~ 5 星評價。
* **文字框 `心得筆記`**：輸入您的私人閱讀心得 (框體高度固定，內容過多可捲動)。

### C. AI 分析區 (Read-Only)
此區域為唯讀，顯示由 Gemini AI 生成的資訊。
* **標籤 (Tags)**：以膠囊形式顯示書籍屬性。
* **AI 劇情分析**：藍色資訊框，顯示詳細的劇情大綱。
* **原始簡介**：顯示爬蟲抓取的網站原文案。

---

## 4. 系統通知訊息總覽 (Notifications)

系統會透過畫面右下角 (Toast) 或中央提示框 (Alert) 來傳達狀態。

| 類型 | 樣式/圖示 | 訊息範例 | 出現時機 |
| :--- | :--- | :--- | :--- |
| **成功** | ✅ (綠色) | `成功入庫：《書名》` | 爬蟲與 AI 分析完成，資料寫入資料庫後。 |
| **成功** | 💾 (一般) | `資料已成功儲存！` | 在詳情面板點擊儲存按鈕後。 |
| **成功** | ✅ (一般) | `書籍已刪除` | 在詳情面板點擊刪除按鈕後。 |
| **載入中**| 🤖 (Spinner) | `正在爬取網頁並進行 AI 分析...` | 點擊側邊欄「啟動 AI」按鈕後，需等待約 5-15 秒。 |
| **錯誤** | 🚨 (紅色區塊)| `入庫失敗：爬蟲無法解析...` | 網址無效、網路中斷或網站改版導致爬蟲失效時。 |
| **提示** | ℹ️ (藍色區塊)| `找不到符合條件的書籍。` | 當篩選條件 (關鍵字/標籤) 過於嚴格，導致列表為空時。 |
| **提示** | ℹ️ (藍色區塊)| `尚無標籤數據，請多加幾本書吧！` | 在數據儀表板中，若資料庫為空時顯示。 |

---